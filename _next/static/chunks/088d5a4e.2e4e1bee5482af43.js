"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[770],{5412:function(t,e,s){s.d(e,{FM:function(){return _},Lt:function(){return l},P:function(){return y},_f:function(){return u},jp:function(){return R},y3:function(){return m}});var i=s(1226),r=s(4551),o=s(2554),n=s(646),a=s(1716),h=s(5953);const c=t=>parseInt(t.toString().replace(/\W/g,""));class _{constructor(t=0,e=0){this.x=t,this.y=e}toString(){return`{X: ${this.x} Y: ${this.y}}`}getClassName(){return"Vector2"}getHashCode(){let t=c(this.x);return t=397*t^c(this.y),t}toArray(t,e=0){return t[e]=this.x,t[e+1]=this.y,this}fromArray(t,e=0){return _.FromArrayToRef(t,e,this),this}asArray(){const t=new Array;return this.toArray(t,0),t}copyFrom(t){return this.x=t.x,this.y=t.y,this}copyFromFloats(t,e){return this.x=t,this.y=e,this}set(t,e){return this.copyFromFloats(t,e)}add(t){return new _(this.x+t.x,this.y+t.y)}addToRef(t,e){return e.x=this.x+t.x,e.y=this.y+t.y,this}addInPlace(t){return this.x+=t.x,this.y+=t.y,this}addVector3(t){return new _(this.x+t.x,this.y+t.y)}subtract(t){return new _(this.x-t.x,this.y-t.y)}subtractToRef(t,e){return e.x=this.x-t.x,e.y=this.y-t.y,this}subtractInPlace(t){return this.x-=t.x,this.y-=t.y,this}multiplyInPlace(t){return this.x*=t.x,this.y*=t.y,this}multiply(t){return new _(this.x*t.x,this.y*t.y)}multiplyToRef(t,e){return e.x=this.x*t.x,e.y=this.y*t.y,this}multiplyByFloats(t,e){return new _(this.x*t,this.y*e)}divide(t){return new _(this.x/t.x,this.y/t.y)}divideToRef(t,e){return e.x=this.x/t.x,e.y=this.y/t.y,this}divideInPlace(t){return this.divideToRef(t,this)}negate(){return new _(-this.x,-this.y)}negateInPlace(){return this.x*=-1,this.y*=-1,this}negateToRef(t){return t.copyFromFloats(-1*this.x,-1*this.y)}scaleInPlace(t){return this.x*=t,this.y*=t,this}scale(t){const e=new _(0,0);return this.scaleToRef(t,e),e}scaleToRef(t,e){return e.x=this.x*t,e.y=this.y*t,this}scaleAndAddToRef(t,e){return e.x+=this.x*t,e.y+=this.y*t,this}equals(t){return t&&this.x===t.x&&this.y===t.y}equalsWithEpsilon(t,e=r.kn){return t&&i.R.WithinEpsilon(this.x,t.x,e)&&i.R.WithinEpsilon(this.y,t.y,e)}floor(){return new _(Math.floor(this.x),Math.floor(this.y))}fract(){return new _(this.x-Math.floor(this.x),this.y-Math.floor(this.y))}rotateToRef(t,e){const s=Math.cos(t),i=Math.sin(t);return e.x=s*this.x-i*this.y,e.y=i*this.x+s*this.y,this}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}lengthSquared(){return this.x*this.x+this.y*this.y}normalize(){return _.NormalizeToRef(this,this),this}clone(){return new _(this.x,this.y)}static Zero(){return new _(0,0)}static One(){return new _(1,1)}static get ZeroReadOnly(){return _._ZeroReadOnly}static FromArray(t,e=0){return new _(t[e],t[e+1])}static FromArrayToRef(t,e,s){s.x=t[e],s.y=t[e+1]}static CatmullRom(t,e,s,i,r){const o=r*r,n=r*o,a=.5*(2*e.x+(-t.x+s.x)*r+(2*t.x-5*e.x+4*s.x-i.x)*o+(-t.x+3*e.x-3*s.x+i.x)*n),h=.5*(2*e.y+(-t.y+s.y)*r+(2*t.y-5*e.y+4*s.y-i.y)*o+(-t.y+3*e.y-3*s.y+i.y)*n);return new _(a,h)}static Clamp(t,e,s){let i=t.x;i=i>s.x?s.x:i,i=i<e.x?e.x:i;let r=t.y;return r=r>s.y?s.y:r,r=r<e.y?e.y:r,new _(i,r)}static Hermite(t,e,s,i,r){const o=r*r,n=r*o,a=2*n-3*o+1,h=-2*n+3*o,c=n-2*o+r,y=n-o,l=t.x*a+s.x*h+e.x*c+i.x*y,u=t.y*a+s.y*h+e.y*c+i.y*y;return new _(l,u)}static Hermite1stDerivative(t,e,s,i,r){const o=_.Zero();return this.Hermite1stDerivativeToRef(t,e,s,i,r,o),o}static Hermite1stDerivativeToRef(t,e,s,i,r,o){const n=r*r;o.x=6*(n-r)*t.x+(3*n-4*r+1)*e.x+6*(-n+r)*s.x+(3*n-2*r)*i.x,o.y=6*(n-r)*t.y+(3*n-4*r+1)*e.y+6*(-n+r)*s.y+(3*n-2*r)*i.y}static Lerp(t,e,s){const i=t.x+(e.x-t.x)*s,r=t.y+(e.y-t.y)*s;return new _(i,r)}static Dot(t,e){return t.x*e.x+t.y*e.y}static Normalize(t){const e=_.Zero();return this.NormalizeToRef(t,e),e}static NormalizeToRef(t,e){const s=t.length();0!==s&&(e.x=t.x/s,e.y=t.y/s)}static Minimize(t,e){const s=t.x<e.x?t.x:e.x,i=t.y<e.y?t.y:e.y;return new _(s,i)}static Maximize(t,e){const s=t.x>e.x?t.x:e.x,i=t.y>e.y?t.y:e.y;return new _(s,i)}static Transform(t,e){const s=_.Zero();return _.TransformToRef(t,e,s),s}static TransformToRef(t,e,s){const i=e.m,r=t.x*i[0]+t.y*i[4]+i[12],o=t.x*i[1]+t.y*i[5]+i[13];s.x=r,s.y=o}static PointInTriangle(t,e,s,i){const r=.5*(-s.y*i.x+e.y*(-s.x+i.x)+e.x*(s.y-i.y)+s.x*i.y),o=r<0?-1:1,n=(e.y*i.x-e.x*i.y+(i.y-e.y)*t.x+(e.x-i.x)*t.y)*o,a=(e.x*s.y-e.y*s.x+(e.y-s.y)*t.x+(s.x-e.x)*t.y)*o;return n>0&&a>0&&n+a<2*r*o}static Distance(t,e){return Math.sqrt(_.DistanceSquared(t,e))}static DistanceSquared(t,e){const s=t.x-e.x,i=t.y-e.y;return s*s+i*i}static Center(t,e){return _.CenterToRef(t,e,_.Zero())}static CenterToRef(t,e,s){return s.copyFromFloats((t.x+e.x)/2,(t.y+e.y)/2)}static DistanceOfPointFromSegment(t,e,s){const i=_.DistanceSquared(e,s);if(0===i)return _.Distance(t,e);const r=s.subtract(e),o=Math.max(0,Math.min(1,_.Dot(t.subtract(e),r)/i)),n=e.add(r.multiplyByFloats(o,o));return _.Distance(t,n)}}_._ZeroReadOnly=_.Zero();class y{constructor(t=0,e=0,s=0){this._isDirty=!0,this._x=t,this._y=e,this._z=s}get x(){return this._x}set x(t){this._x=t,this._isDirty=!0}get y(){return this._y}set y(t){this._y=t,this._isDirty=!0}get z(){return this._z}set z(t){this._z=t,this._isDirty=!0}toString(){return`{X: ${this._x} Y: ${this._y} Z: ${this._z}}`}getClassName(){return"Vector3"}getHashCode(){let t=c(this._x);return t=397*t^c(this._y),t=397*t^c(this._z),t}asArray(){const t=[];return this.toArray(t,0),t}toArray(t,e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,this}fromArray(t,e=0){return y.FromArrayToRef(t,e,this),this}toQuaternion(){return u.RotationYawPitchRoll(this._y,this._x,this._z)}addInPlace(t){return this.addInPlaceFromFloats(t._x,t._y,t._z)}addInPlaceFromFloats(t,e,s){return this.x+=t,this.y+=e,this.z+=s,this}add(t){return new y(this._x+t._x,this._y+t._y,this._z+t._z)}addToRef(t,e){return e.copyFromFloats(this._x+t._x,this._y+t._y,this._z+t._z)}subtractInPlace(t){return this.x-=t._x,this.y-=t._y,this.z-=t._z,this}subtract(t){return new y(this._x-t._x,this._y-t._y,this._z-t._z)}subtractToRef(t,e){return this.subtractFromFloatsToRef(t._x,t._y,t._z,e)}subtractFromFloats(t,e,s){return new y(this._x-t,this._y-e,this._z-s)}subtractFromFloatsToRef(t,e,s,i){return i.copyFromFloats(this._x-t,this._y-e,this._z-s)}negate(){return new y(-this._x,-this._y,-this._z)}negateInPlace(){return this.x*=-1,this.y*=-1,this.z*=-1,this}negateToRef(t){return t.copyFromFloats(-1*this._x,-1*this._y,-1*this._z)}scaleInPlace(t){return this.x*=t,this.y*=t,this.z*=t,this}scale(t){return new y(this._x*t,this._y*t,this._z*t)}scaleToRef(t,e){return e.copyFromFloats(this._x*t,this._y*t,this._z*t)}applyRotationQuaternionToRef(t,e){const s=t.w*this.x+t.y*this.z-t.z*this.y,i=t.w*this.y+t.z*this.x-t.x*this.z,r=t.w*this.z+t.x*this.y-t.y*this.x,o=-t.x*this.x-t.y*this.y-t.z*this.z;return e.x=s*t.w+o*-t.x+i*-t.z-r*-t.y,e.y=i*t.w+o*-t.y+r*-t.x-s*-t.z,e.z=r*t.w+o*-t.z+s*-t.y-i*-t.x,e}applyRotationQuaternionInPlace(t){return this.applyRotationQuaternionToRef(t,this)}applyRotationQuaternion(t){return this.applyRotationQuaternionToRef(t,y.Zero())}scaleAndAddToRef(t,e){return e.addInPlaceFromFloats(this._x*t,this._y*t,this._z*t)}projectOnPlane(t,e){const s=y.Zero();return this.projectOnPlaneToRef(t,e,s),s}projectOnPlaneToRef(t,e,s){const i=t.normal,r=t.d,o=x.Vector3[0];this.subtractToRef(e,o),o.normalize();const n=y.Dot(o,i);if(Math.abs(n)<Math.pow(10,-10))s.setAll(1/0);else{const t=-(y.Dot(e,i)+r)/n,a=o.scaleInPlace(t);e.addToRef(a,s)}}equals(t){return t&&this._x===t._x&&this._y===t._y&&this._z===t._z}equalsWithEpsilon(t,e=r.kn){return t&&i.R.WithinEpsilon(this._x,t._x,e)&&i.R.WithinEpsilon(this._y,t._y,e)&&i.R.WithinEpsilon(this._z,t._z,e)}equalsToFloats(t,e,s){return this._x===t&&this._y===e&&this._z===s}multiplyInPlace(t){return this.x*=t._x,this.y*=t._y,this.z*=t._z,this}multiply(t){return this.multiplyByFloats(t._x,t._y,t._z)}multiplyToRef(t,e){return e.copyFromFloats(this._x*t._x,this._y*t._y,this._z*t._z)}multiplyByFloats(t,e,s){return new y(this._x*t,this._y*e,this._z*s)}divide(t){return new y(this._x/t._x,this._y/t._y,this._z/t._z)}divideToRef(t,e){return e.copyFromFloats(this._x/t._x,this._y/t._y,this._z/t._z)}divideInPlace(t){return this.divideToRef(t,this)}minimizeInPlace(t){return this.minimizeInPlaceFromFloats(t._x,t._y,t._z)}maximizeInPlace(t){return this.maximizeInPlaceFromFloats(t._x,t._y,t._z)}minimizeInPlaceFromFloats(t,e,s){return t<this._x&&(this.x=t),e<this._y&&(this.y=e),s<this._z&&(this.z=s),this}maximizeInPlaceFromFloats(t,e,s){return t>this._x&&(this.x=t),e>this._y&&(this.y=e),s>this._z&&(this.z=s),this}isNonUniformWithinEpsilon(t){const e=Math.abs(this._x),s=Math.abs(this._y);if(!i.R.WithinEpsilon(e,s,t))return!0;const r=Math.abs(this._z);return!i.R.WithinEpsilon(e,r,t)||!i.R.WithinEpsilon(s,r,t)}get isNonUniform(){const t=Math.abs(this._x);if(t!==Math.abs(this._y))return!0;return t!==Math.abs(this._z)}floor(){return new y(Math.floor(this._x),Math.floor(this._y),Math.floor(this._z))}fract(){return new y(this._x-Math.floor(this._x),this._y-Math.floor(this._y),this._z-Math.floor(this._z))}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z)}lengthSquared(){return this._x*this._x+this._y*this._y+this._z*this._z}get hasAZeroComponent(){return this._x*this._y*this._z===0}normalize(){return this.normalizeFromLength(this.length())}reorderInPlace(t){return"xyz"===(t=t.toLowerCase())||(x.Vector3[0].copyFrom(this),["x","y","z"].forEach(((e,s)=>{this[e]=x.Vector3[0][t[s]]}))),this}rotateByQuaternionToRef(t,e){return t.toRotationMatrix(x.Matrix[0]),y.TransformCoordinatesToRef(this,x.Matrix[0],e),e}rotateByQuaternionAroundPointToRef(t,e,s){return this.subtractToRef(e,x.Vector3[0]),x.Vector3[0].rotateByQuaternionToRef(t,x.Vector3[0]),e.addToRef(x.Vector3[0],s),s}cross(t){return y.Cross(this,t)}normalizeFromLength(t){return 0===t||1===t?this:this.scaleInPlace(1/t)}normalizeToNew(){const t=new y(0,0,0);return this.normalizeToRef(t),t}normalizeToRef(t){const e=this.length();return 0===e||1===e?t.copyFromFloats(this._x,this._y,this._z):this.scaleToRef(1/e,t)}clone(){return new y(this._x,this._y,this._z)}copyFrom(t){return this.copyFromFloats(t._x,t._y,t._z)}copyFromFloats(t,e,s){return this.x=t,this.y=e,this.z=s,this}set(t,e,s){return this.copyFromFloats(t,e,s)}setAll(t){return this.x=this.y=this.z=t,this}static GetClipFactor(t,e,s,i){const r=y.Dot(t,s)-i;return r/(r-(y.Dot(e,s)-i))}static GetAngleBetweenVectors(t,e,s){const r=t.normalizeToRef(x.Vector3[1]),o=e.normalizeToRef(x.Vector3[2]);let n=y.Dot(r,o);n=i.R.Clamp(n,-1,1);const a=Math.acos(n),h=x.Vector3[3];return y.CrossToRef(r,o,h),y.Dot(h,s)>0?isNaN(a)?0:a:isNaN(a)?-Math.PI:-Math.acos(n)}static GetAngleBetweenVectorsOnPlane(t,e,s){x.Vector3[0].copyFrom(t);const r=x.Vector3[0];x.Vector3[1].copyFrom(e);const o=x.Vector3[1];x.Vector3[2].copyFrom(s);const n=x.Vector3[2],a=x.Vector3[3],h=x.Vector3[4];r.normalize(),o.normalize(),n.normalize(),y.CrossToRef(n,r,a),y.CrossToRef(a,n,h);const c=Math.atan2(y.Dot(o,a),y.Dot(o,h));return i.R.NormalizeRadians(c)}static SlerpToRef(t,e,s,o){s=i.R.Clamp(s,0,1);const n=x.Vector3[0],a=x.Vector3[1];n.copyFrom(t);const h=n.length();n.normalizeFromLength(h),a.copyFrom(e);const c=a.length();a.normalizeFromLength(c);const _=y.Dot(n,a);let l,u;if(_<1-r.kn){const t=Math.acos(_),e=1/Math.sin(t);l=Math.sin((1-s)*t)*e,u=Math.sin(s*t)*e}else l=1-s,u=s;n.scaleInPlace(l),a.scaleInPlace(u),o.copyFrom(n).addInPlace(a),o.scaleInPlace(i.R.Lerp(h,c,s))}static SmoothToRef(t,e,s,i,r){y.SlerpToRef(t,e,0===i?1:s/i,r)}static FromArray(t,e=0){return new y(t[e],t[e+1],t[e+2])}static FromFloatArray(t,e){return y.FromArray(t,e)}static FromArrayToRef(t,e,s){s.x=t[e],s.y=t[e+1],s.z=t[e+2]}static FromFloatArrayToRef(t,e,s){return y.FromArrayToRef(t,e,s)}static FromFloatsToRef(t,e,s,i){i.copyFromFloats(t,e,s)}static Zero(){return new y(0,0,0)}static One(){return new y(1,1,1)}static Up(){return new y(0,1,0)}static get UpReadOnly(){return y._UpReadOnly}static get DownReadOnly(){return y._DownReadOnly}static get RightReadOnly(){return y._RightReadOnly}static get LeftReadOnly(){return y._LeftReadOnly}static get LeftHandedForwardReadOnly(){return y._LeftHandedForwardReadOnly}static get RightHandedForwardReadOnly(){return y._RightHandedForwardReadOnly}static get ZeroReadOnly(){return y._ZeroReadOnly}static Down(){return new y(0,-1,0)}static Forward(t=!1){return new y(0,0,t?-1:1)}static Backward(t=!1){return new y(0,0,t?1:-1)}static Right(){return new y(1,0,0)}static Left(){return new y(-1,0,0)}static TransformCoordinates(t,e){const s=y.Zero();return y.TransformCoordinatesToRef(t,e,s),s}static TransformCoordinatesToRef(t,e,s){y.TransformCoordinatesFromFloatsToRef(t._x,t._y,t._z,e,s)}static TransformCoordinatesFromFloatsToRef(t,e,s,i,r){const o=i.m,n=t*o[0]+e*o[4]+s*o[8]+o[12],a=t*o[1]+e*o[5]+s*o[9]+o[13],h=t*o[2]+e*o[6]+s*o[10]+o[14],c=1/(t*o[3]+e*o[7]+s*o[11]+o[15]);r.x=n*c,r.y=a*c,r.z=h*c}static TransformNormal(t,e){const s=y.Zero();return y.TransformNormalToRef(t,e,s),s}static TransformNormalToRef(t,e,s){this.TransformNormalFromFloatsToRef(t._x,t._y,t._z,e,s)}static TransformNormalFromFloatsToRef(t,e,s,i,r){const o=i.m;r.x=t*o[0]+e*o[4]+s*o[8],r.y=t*o[1]+e*o[5]+s*o[9],r.z=t*o[2]+e*o[6]+s*o[10]}static CatmullRom(t,e,s,i,r){const o=r*r,n=r*o,a=.5*(2*e._x+(-t._x+s._x)*r+(2*t._x-5*e._x+4*s._x-i._x)*o+(-t._x+3*e._x-3*s._x+i._x)*n),h=.5*(2*e._y+(-t._y+s._y)*r+(2*t._y-5*e._y+4*s._y-i._y)*o+(-t._y+3*e._y-3*s._y+i._y)*n),c=.5*(2*e._z+(-t._z+s._z)*r+(2*t._z-5*e._z+4*s._z-i._z)*o+(-t._z+3*e._z-3*s._z+i._z)*n);return new y(a,h,c)}static Clamp(t,e,s){const i=new y;return y.ClampToRef(t,e,s,i),i}static ClampToRef(t,e,s,i){let r=t._x;r=r>s._x?s._x:r,r=r<e._x?e._x:r;let o=t._y;o=o>s._y?s._y:o,o=o<e._y?e._y:o;let n=t._z;n=n>s._z?s._z:n,n=n<e._z?e._z:n,i.copyFromFloats(r,o,n)}static CheckExtends(t,e,s){e.minimizeInPlace(t),s.maximizeInPlace(t)}static Hermite(t,e,s,i,r){const o=r*r,n=r*o,a=2*n-3*o+1,h=-2*n+3*o,c=n-2*o+r,_=n-o,l=t._x*a+s._x*h+e._x*c+i._x*_,u=t._y*a+s._y*h+e._y*c+i._y*_,m=t._z*a+s._z*h+e._z*c+i._z*_;return new y(l,u,m)}static Hermite1stDerivative(t,e,s,i,r){const o=y.Zero();return this.Hermite1stDerivativeToRef(t,e,s,i,r,o),o}static Hermite1stDerivativeToRef(t,e,s,i,r,o){const n=r*r;o.x=6*(n-r)*t.x+(3*n-4*r+1)*e.x+6*(-n+r)*s.x+(3*n-2*r)*i.x,o.y=6*(n-r)*t.y+(3*n-4*r+1)*e.y+6*(-n+r)*s.y+(3*n-2*r)*i.y,o.z=6*(n-r)*t.z+(3*n-4*r+1)*e.z+6*(-n+r)*s.z+(3*n-2*r)*i.z}static Lerp(t,e,s){const i=new y(0,0,0);return y.LerpToRef(t,e,s,i),i}static LerpToRef(t,e,s,i){i.x=t._x+(e._x-t._x)*s,i.y=t._y+(e._y-t._y)*s,i.z=t._z+(e._z-t._z)*s}static Dot(t,e){return t._x*e._x+t._y*e._y+t._z*e._z}static Cross(t,e){const s=y.Zero();return y.CrossToRef(t,e,s),s}static CrossToRef(t,e,s){const i=t._y*e._z-t._z*e._y,r=t._z*e._x-t._x*e._z,o=t._x*e._y-t._y*e._x;s.copyFromFloats(i,r,o)}static Normalize(t){const e=y.Zero();return y.NormalizeToRef(t,e),e}static NormalizeToRef(t,e){t.normalizeToRef(e)}static Project(t,e,s,i){const r=new y;return y.ProjectToRef(t,e,s,i,r),r}static ProjectToRef(t,e,s,i,r){const o=i.width,n=i.height,a=i.x,h=i.y,c=x.Matrix[1];m.FromValuesToRef(o/2,0,0,0,0,-n/2,0,0,0,0,.5,0,a+o/2,n/2+h,.5,1,c);const _=x.Matrix[0];return e.multiplyToRef(s,_),_.multiplyToRef(c,_),y.TransformCoordinatesToRef(t,_,r),r}static _UnprojectFromInvertedMatrixToRef(t,e,s){y.TransformCoordinatesToRef(t,e,s);const r=e.m,o=t._x*r[3]+t._y*r[7]+t._z*r[11]+r[15];i.R.WithinEpsilon(o,1)&&s.scaleInPlace(1/o)}static UnprojectFromTransform(t,e,s,i,r){return this.Unproject(t,e,s,i,r,m.IdentityReadOnly)}static Unproject(t,e,s,i,r,o){const n=y.Zero();return y.UnprojectToRef(t,e,s,i,r,o,n),n}static UnprojectToRef(t,e,s,i,r,o,n){y.UnprojectFloatsToRef(t._x,t._y,t._z,e,s,i,r,o,n)}static UnprojectFloatsToRef(t,e,s,i,r,o,n,a,c){const _=x.Matrix[0];o.multiplyToRef(n,_),_.multiplyToRef(a,_),_.invert();const l=x.Vector3[0];l.x=t/i*2-1,l.y=-(e/r*2-1),h.l.LastCreatedEngine?.isNDCHalfZRange?l.z=s:l.z=2*s-1,y._UnprojectFromInvertedMatrixToRef(l,_,c)}static Minimize(t,e){const s=t.clone();return s.minimizeInPlace(e),s}static Maximize(t,e){const s=t.clone();return s.maximizeInPlace(e),s}static Distance(t,e){return Math.sqrt(y.DistanceSquared(t,e))}static DistanceSquared(t,e){const s=t._x-e._x,i=t._y-e._y,r=t._z-e._z;return s*s+i*i+r*r}static ProjectOnTriangleToRef(t,e,s,o,n){const a=x.Vector3[0],h=x.Vector3[1],c=x.Vector3[2],_=x.Vector3[3],l=x.Vector3[4];s.subtractToRef(e,a),o.subtractToRef(e,h),o.subtractToRef(s,c);const u=a.length(),m=h.length(),R=c.length();if(u<r.kn||m<r.kn||R<r.kn)return n.copyFrom(e),y.Distance(t,e);t.subtractToRef(e,l),y.CrossToRef(a,h,_);const f=_.length();if(f<r.kn)return n.copyFrom(e),y.Distance(t,e);_.normalizeFromLength(f);let z=l.length();if(z<r.kn)return n.copyFrom(e),0;l.normalizeFromLength(z);const d=y.Dot(_,l),T=x.Vector3[5],w=x.Vector3[6];T.copyFrom(_).scaleInPlace(-z*d),w.copyFrom(t).addInPlace(T);const p=x.Vector3[4],F=x.Vector3[5],I=x.Vector3[7],M=x.Vector3[8];p.copyFrom(a).scaleInPlace(1/u),M.copyFrom(h).scaleInPlace(1/m),p.addInPlace(M).scaleInPlace(-1),F.copyFrom(a).scaleInPlace(-1/u),M.copyFrom(c).scaleInPlace(1/R),F.addInPlace(M).scaleInPlace(-1),I.copyFrom(c).scaleInPlace(-1/R),M.copyFrom(h).scaleInPlace(-1/m),I.addInPlace(M).scaleInPlace(-1);const g=x.Vector3[9];let A;g.copyFrom(w).subtractInPlace(e),y.CrossToRef(p,g,M),A=y.Dot(M,_);const P=A;g.copyFrom(w).subtractInPlace(s),y.CrossToRef(F,g,M),A=y.Dot(M,_);const V=A;g.copyFrom(w).subtractInPlace(o),y.CrossToRef(I,g,M),A=y.Dot(M,_);const D=A,C=x.Vector3[10];let L,H;P>0&&V<0?(C.copyFrom(a),L=e,H=s):V>0&&D<0?(C.copyFrom(c),L=s,H=o):(C.copyFrom(h).scaleInPlace(-1),L=o,H=e);const k=x.Vector3[9],v=x.Vector3[4];L.subtractToRef(w,M),H.subtractToRef(w,k),y.CrossToRef(M,k,v);if(!(y.Dot(v,_)<0))return n.copyFrom(w),Math.abs(z*d);const O=x.Vector3[5];y.CrossToRef(C,v,O),O.normalize();const Z=x.Vector3[9];Z.copyFrom(L).subtractInPlace(w);const S=Z.length();if(S<r.kn)return n.copyFrom(L),y.Distance(t,L);Z.normalizeFromLength(S);const U=y.Dot(O,Z),b=x.Vector3[7];b.copyFrom(w).addInPlace(O.scaleInPlace(S*U)),M.copyFrom(b).subtractInPlace(L),z=C.length(),C.normalizeFromLength(z);let q=y.Dot(M,C)/Math.max(z,r.kn);return q=i.R.Clamp(q,0,1),b.copyFrom(L).addInPlace(C.scaleInPlace(q*z)),n.copyFrom(b),y.Distance(t,b)}static Center(t,e){return y.CenterToRef(t,e,y.Zero())}static CenterToRef(t,e,s){return s.copyFromFloats((t._x+e._x)/2,(t._y+e._y)/2,(t._z+e._z)/2)}static RotationFromAxis(t,e,s){const i=y.Zero();return y.RotationFromAxisToRef(t,e,s,i),i}static RotationFromAxisToRef(t,e,s,i){const r=x.Quaternion[0];u.RotationQuaternionFromAxisToRef(t,e,s,r),r.toEulerAnglesToRef(i)}}y._UpReadOnly=y.Up(),y._DownReadOnly=y.Down(),y._LeftHandedForwardReadOnly=y.Forward(!1),y._RightHandedForwardReadOnly=y.Forward(!0),y._RightReadOnly=y.Right(),y._LeftReadOnly=y.Left(),y._ZeroReadOnly=y.Zero();class l{constructor(t,e,s,i){this.x=t,this.y=e,this.z=s,this.w=i}toString(){return`{X: ${this.x} Y: ${this.y} Z: ${this.z} W: ${this.w}}`}getClassName(){return"Vector4"}getHashCode(){let t=c(this.x);return t=397*t^c(this.y),t=397*t^c(this.z),t=397*t^c(this.w),t}asArray(){const t=new Array;return this.toArray(t,0),t}toArray(t,e){return void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,this}fromArray(t,e=0){return l.FromArrayToRef(t,e,this),this}addInPlace(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}add(t){return new l(this.x+t.x,this.y+t.y,this.z+t.z,this.w+t.w)}addToRef(t,e){return e.x=this.x+t.x,e.y=this.y+t.y,e.z=this.z+t.z,e.w=this.w+t.w,this}subtractInPlace(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subtract(t){return new l(this.x-t.x,this.y-t.y,this.z-t.z,this.w-t.w)}subtractToRef(t,e){return e.x=this.x-t.x,e.y=this.y-t.y,e.z=this.z-t.z,e.w=this.w-t.w,this}subtractFromFloats(t,e,s,i){return new l(this.x-t,this.y-e,this.z-s,this.w-i)}subtractFromFloatsToRef(t,e,s,i,r){return r.x=this.x-t,r.y=this.y-e,r.z=this.z-s,r.w=this.w-i,this}negate(){return new l(-this.x,-this.y,-this.z,-this.w)}negateInPlace(){return this.x*=-1,this.y*=-1,this.z*=-1,this.w*=-1,this}negateToRef(t){return t.copyFromFloats(-1*this.x,-1*this.y,-1*this.z,-1*this.w)}scaleInPlace(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}scale(t){return new l(this.x*t,this.y*t,this.z*t,this.w*t)}scaleToRef(t,e){return e.x=this.x*t,e.y=this.y*t,e.z=this.z*t,e.w=this.w*t,this}scaleAndAddToRef(t,e){return e.x+=this.x*t,e.y+=this.y*t,e.z+=this.z*t,e.w+=this.w*t,this}equals(t){return t&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w}equalsWithEpsilon(t,e=r.kn){return t&&i.R.WithinEpsilon(this.x,t.x,e)&&i.R.WithinEpsilon(this.y,t.y,e)&&i.R.WithinEpsilon(this.z,t.z,e)&&i.R.WithinEpsilon(this.w,t.w,e)}equalsToFloats(t,e,s,i){return this.x===t&&this.y===e&&this.z===s&&this.w===i}multiplyInPlace(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiply(t){return new l(this.x*t.x,this.y*t.y,this.z*t.z,this.w*t.w)}multiplyToRef(t,e){return e.x=this.x*t.x,e.y=this.y*t.y,e.z=this.z*t.z,e.w=this.w*t.w,this}multiplyByFloats(t,e,s,i){return new l(this.x*t,this.y*e,this.z*s,this.w*i)}divide(t){return new l(this.x/t.x,this.y/t.y,this.z/t.z,this.w/t.w)}divideToRef(t,e){return e.x=this.x/t.x,e.y=this.y/t.y,e.z=this.z/t.z,e.w=this.w/t.w,this}divideInPlace(t){return this.divideToRef(t,this)}minimizeInPlace(t){return t.x<this.x&&(this.x=t.x),t.y<this.y&&(this.y=t.y),t.z<this.z&&(this.z=t.z),t.w<this.w&&(this.w=t.w),this}maximizeInPlace(t){return t.x>this.x&&(this.x=t.x),t.y>this.y&&(this.y=t.y),t.z>this.z&&(this.z=t.z),t.w>this.w&&(this.w=t.w),this}floor(){return new l(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z),Math.floor(this.w))}fract(){return new l(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z),this.w-Math.floor(this.w))}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}lengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}normalize(){const t=this.length();return 0===t?this:this.scaleInPlace(1/t)}toVector3(){return new y(this.x,this.y,this.z)}clone(){return new l(this.x,this.y,this.z,this.w)}copyFrom(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}copyFromFloats(t,e,s,i){return this.x=t,this.y=e,this.z=s,this.w=i,this}set(t,e,s,i){return this.copyFromFloats(t,e,s,i)}setAll(t){return this.x=this.y=this.z=this.w=t,this}static FromArray(t,e){return e||(e=0),new l(t[e],t[e+1],t[e+2],t[e+3])}static FromArrayToRef(t,e,s){s.x=t[e],s.y=t[e+1],s.z=t[e+2],s.w=t[e+3]}static FromFloatArrayToRef(t,e,s){l.FromArrayToRef(t,e,s)}static FromFloatsToRef(t,e,s,i,r){r.x=t,r.y=e,r.z=s,r.w=i}static Zero(){return new l(0,0,0,0)}static One(){return new l(1,1,1,1)}static get ZeroReadOnly(){return l._ZeroReadOnly}static Normalize(t){const e=l.Zero();return l.NormalizeToRef(t,e),e}static NormalizeToRef(t,e){e.copyFrom(t),e.normalize()}static Minimize(t,e){const s=t.clone();return s.minimizeInPlace(e),s}static Maximize(t,e){const s=t.clone();return s.maximizeInPlace(e),s}static Distance(t,e){return Math.sqrt(l.DistanceSquared(t,e))}static DistanceSquared(t,e){const s=t.x-e.x,i=t.y-e.y,r=t.z-e.z,o=t.w-e.w;return s*s+i*i+r*r+o*o}static Center(t,e){return l.CenterToRef(t,e,l.Zero())}static CenterToRef(t,e,s){return s.copyFromFloats((t.x+e.x)/2,(t.y+e.y)/2,(t.z+e.z)/2,(t.w+e.w)/2)}static TransformCoordinates(t,e){const s=l.Zero();return l.TransformCoordinatesToRef(t,e,s),s}static TransformCoordinatesToRef(t,e,s){l.TransformCoordinatesFromFloatsToRef(t._x,t._y,t._z,e,s)}static TransformCoordinatesFromFloatsToRef(t,e,s,i,r){const o=i.m,n=t*o[0]+e*o[4]+s*o[8]+o[12],a=t*o[1]+e*o[5]+s*o[9]+o[13],h=t*o[2]+e*o[6]+s*o[10]+o[14],c=t*o[3]+e*o[7]+s*o[11]+o[15];r.x=n,r.y=a,r.z=h,r.w=c}static TransformNormal(t,e){const s=l.Zero();return l.TransformNormalToRef(t,e,s),s}static TransformNormalToRef(t,e,s){const i=e.m,r=t.x*i[0]+t.y*i[4]+t.z*i[8],o=t.x*i[1]+t.y*i[5]+t.z*i[9],n=t.x*i[2]+t.y*i[6]+t.z*i[10];s.x=r,s.y=o,s.z=n,s.w=t.w}static TransformNormalFromFloatsToRef(t,e,s,i,r,o){const n=r.m;o.x=t*n[0]+e*n[4]+s*n[8],o.y=t*n[1]+e*n[5]+s*n[9],o.z=t*n[2]+e*n[6]+s*n[10],o.w=i}static FromVector3(t,e=0){return new l(t._x,t._y,t._z,e)}}l._ZeroReadOnly=l.Zero();class u{constructor(t=0,e=0,s=0,i=1){this._isDirty=!0,this._x=t,this._y=e,this._z=s,this._w=i}get x(){return this._x}set x(t){this._x=t,this._isDirty=!0}get y(){return this._y}set y(t){this._y=t,this._isDirty=!0}get z(){return this._z}set z(t){this._z=t,this._isDirty=!0}get w(){return this._w}set w(t){this._w=t,this._isDirty=!0}toString(){return`{X: ${this._x} Y: ${this._y} Z: ${this._z} W: ${this._w}}`}getClassName(){return"Quaternion"}getHashCode(){let t=c(this._x);return t=397*t^c(this._y),t=397*t^c(this._z),t=397*t^c(this._w),t}asArray(){return[this._x,this._y,this._z,this._w]}toArray(t,e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,this}equals(t){return t&&this._x===t._x&&this._y===t._y&&this._z===t._z&&this._w===t._w}equalsWithEpsilon(t,e=r.kn){return t&&i.R.WithinEpsilon(this._x,t._x,e)&&i.R.WithinEpsilon(this._y,t._y,e)&&i.R.WithinEpsilon(this._z,t._z,e)&&i.R.WithinEpsilon(this._w,t._w,e)}clone(){return new u(this._x,this._y,this._z,this._w)}copyFrom(t){return this.x=t._x,this.y=t._y,this.z=t._z,this.w=t._w,this}copyFromFloats(t,e,s,i){return this.x=t,this.y=e,this.z=s,this.w=i,this}set(t,e,s,i){return this.copyFromFloats(t,e,s,i)}add(t){return new u(this._x+t._x,this._y+t._y,this._z+t._z,this._w+t._w)}addInPlace(t){return this._x+=t._x,this._y+=t._y,this._z+=t._z,this._w+=t._w,this}subtract(t){return new u(this._x-t._x,this._y-t._y,this._z-t._z,this._w-t._w)}subtractInPlace(t){return this._x-=t._x,this._y-=t._y,this._z-=t._z,this._w-=t._w,this}scale(t){return new u(this._x*t,this._y*t,this._z*t,this._w*t)}scaleToRef(t,e){return e.x=this._x*t,e.y=this._y*t,e.z=this._z*t,e.w=this._w*t,this}scaleInPlace(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}scaleAndAddToRef(t,e){return e.x+=this._x*t,e.y+=this._y*t,e.z+=this._z*t,e.w+=this._w*t,this}multiply(t){const e=new u(0,0,0,1);return this.multiplyToRef(t,e),e}multiplyToRef(t,e){const s=this._x*t._w+this._y*t._z-this._z*t._y+this._w*t._x,i=-this._x*t._z+this._y*t._w+this._z*t._x+this._w*t._y,r=this._x*t._y-this._y*t._x+this._z*t._w+this._w*t._z,o=-this._x*t._x-this._y*t._y-this._z*t._z+this._w*t._w;return e.copyFromFloats(s,i,r,o),this}multiplyInPlace(t){return this.multiplyToRef(t,this),this}conjugateToRef(t){return t.copyFromFloats(-this._x,-this._y,-this._z,this._w),this}conjugateInPlace(){return this.x*=-1,this.y*=-1,this.z*=-1,this}conjugate(){return new u(-this._x,-this._y,-this._z,this._w)}invert(){const t=this.conjugate(),e=this.lengthSquared();return 0==e||1==e||t.scaleInPlace(1/e),t}invertInPlace(){this.conjugateInPlace();const t=this.lengthSquared();return 0==t||1==t||this.scaleInPlace(1/t),this}lengthSquared(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this.lengthSquared())}normalize(){const t=this.length();if(0===t)return this;const e=1/t;return this.scaleInPlace(e),this}normalizeToNew(){const t=this.length();if(0===t)return this.clone();const e=1/t;return this.scale(e)}toEulerAngles(){const t=y.Zero();return this.toEulerAnglesToRef(t),t}toEulerAnglesToRef(t){const e=this._z,s=this._x,i=this._y,r=this._w,o=i*e-s*r,n=.4999999;if(o<-n)t.y=2*Math.atan2(i,r),t.x=Math.PI/2,t.z=0;else if(o>n)t.y=2*Math.atan2(i,r),t.x=-Math.PI/2,t.z=0;else{const n=r*r,a=e*e,h=s*s,c=i*i;t.z=Math.atan2(2*(s*i+e*r),-a-h+c+n),t.x=Math.asin(-2*o),t.y=Math.atan2(2*(e*s+i*r),a-h-c+n)}return this}toRotationMatrix(t){return m.FromQuaternionToRef(this,t),this}fromRotationMatrix(t){return u.FromRotationMatrixToRef(t,this),this}static FromRotationMatrix(t){const e=new u;return u.FromRotationMatrixToRef(t,e),e}static FromRotationMatrixToRef(t,e){const s=t.m,i=s[0],r=s[4],o=s[8],n=s[1],a=s[5],h=s[9],c=s[2],_=s[6],y=s[10],l=i+a+y;let u;l>0?(u=.5/Math.sqrt(l+1),e.w=.25/u,e.x=(_-h)*u,e.y=(o-c)*u,e.z=(n-r)*u):i>a&&i>y?(u=2*Math.sqrt(1+i-a-y),e.w=(_-h)/u,e.x=.25*u,e.y=(r+n)/u,e.z=(o+c)/u):a>y?(u=2*Math.sqrt(1+a-i-y),e.w=(o-c)/u,e.x=(r+n)/u,e.y=.25*u,e.z=(h+_)/u):(u=2*Math.sqrt(1+y-i-a),e.w=(n-r)/u,e.x=(o+c)/u,e.y=(h+_)/u,e.z=.25*u)}static Dot(t,e){return t._x*e._x+t._y*e._y+t._z*e._z+t._w*e._w}static AreClose(t,e){return u.Dot(t,e)>=0}static SmoothToRef(t,e,s,r,o){let n=0===r?1:s/r;n=i.R.Clamp(n,0,1),u.SlerpToRef(t,e,n,o)}static Zero(){return new u(0,0,0,0)}static Inverse(t){return new u(-t._x,-t._y,-t._z,t._w)}static InverseToRef(t,e){return e.set(-t._x,-t._y,-t._z,t._w),e}static Identity(){return new u(0,0,0,1)}static IsIdentity(t){return t&&0===t._x&&0===t._y&&0===t._z&&1===t._w}static RotationAxis(t,e){return u.RotationAxisToRef(t,e,new u)}static RotationAxisToRef(t,e,s){const i=Math.sin(e/2);return t.normalize(),s.w=Math.cos(e/2),s.x=t._x*i,s.y=t._y*i,s.z=t._z*i,s}static FromArray(t,e){return e||(e=0),new u(t[e],t[e+1],t[e+2],t[e+3])}static FromArrayToRef(t,e,s){s.x=t[e],s.y=t[e+1],s.z=t[e+2],s.w=t[e+3]}static FromEulerAngles(t,e,s){const i=new u;return u.RotationYawPitchRollToRef(e,t,s,i),i}static FromEulerAnglesToRef(t,e,s,i){return u.RotationYawPitchRollToRef(e,t,s,i),i}static FromEulerVector(t){const e=new u;return u.RotationYawPitchRollToRef(t._y,t._x,t._z,e),e}static FromEulerVectorToRef(t,e){return u.RotationYawPitchRollToRef(t._y,t._x,t._z,e),e}static FromUnitVectorsToRef(t,e,s){const i=y.Dot(t,e)+1;return i<r.kn?Math.abs(t.x)>Math.abs(t.z)?s.set(-t.y,t.x,0,0):s.set(0,-t.z,t.y,0):(y.CrossToRef(t,e,R.Vector3[0]),s.set(R.Vector3[0].x,R.Vector3[0].y,R.Vector3[0].z,i)),s.normalize()}static RotationYawPitchRoll(t,e,s){const i=new u;return u.RotationYawPitchRollToRef(t,e,s,i),i}static RotationYawPitchRollToRef(t,e,s,i){const r=.5*s,o=.5*e,n=.5*t,a=Math.sin(r),h=Math.cos(r),c=Math.sin(o),_=Math.cos(o),y=Math.sin(n),l=Math.cos(n);i.x=l*c*h+y*_*a,i.y=y*_*h-l*c*a,i.z=l*_*a-y*c*h,i.w=l*_*h+y*c*a}static RotationAlphaBetaGamma(t,e,s){const i=new u;return u.RotationAlphaBetaGammaToRef(t,e,s,i),i}static RotationAlphaBetaGammaToRef(t,e,s,i){const r=.5*(s+t),o=.5*(s-t),n=.5*e;i.x=Math.cos(o)*Math.sin(n),i.y=Math.sin(o)*Math.sin(n),i.z=Math.sin(r)*Math.cos(n),i.w=Math.cos(r)*Math.cos(n)}static RotationQuaternionFromAxis(t,e,s){const i=new u(0,0,0,0);return u.RotationQuaternionFromAxisToRef(t,e,s,i),i}static RotationQuaternionFromAxisToRef(t,e,s,i){const r=x.Matrix[0];m.FromXYZAxesToRef(t.normalize(),e.normalize(),s.normalize(),r),u.FromRotationMatrixToRef(r,i)}static FromLookDirectionLH(t,e){const s=new u;return u.FromLookDirectionLHToRef(t,e,s),s}static FromLookDirectionLHToRef(t,e,s){const i=x.Matrix[0];m.LookDirectionLHToRef(t,e,i),u.FromRotationMatrixToRef(i,s)}static FromLookDirectionRH(t,e){const s=new u;return u.FromLookDirectionRHToRef(t,e,s),s}static FromLookDirectionRHToRef(t,e,s){const i=x.Matrix[0];return m.LookDirectionRHToRef(t,e,i),u.FromRotationMatrixToRef(i,s)}static Slerp(t,e,s){const i=u.Identity();return u.SlerpToRef(t,e,s,i),i}static SlerpToRef(t,e,s,i){let r,o,n=t._x*e._x+t._y*e._y+t._z*e._z+t._w*e._w,a=!1;if(n<0&&(a=!0,n=-n),n>.999999)o=1-s,r=a?-s:s;else{const t=Math.acos(n),e=1/Math.sin(t);o=Math.sin((1-s)*t)*e,r=a?-Math.sin(s*t)*e:Math.sin(s*t)*e}i.x=o*t._x+r*e._x,i.y=o*t._y+r*e._y,i.z=o*t._z+r*e._z,i.w=o*t._w+r*e._w}static Hermite(t,e,s,i,r){const o=r*r,n=r*o,a=2*n-3*o+1,h=-2*n+3*o,c=n-2*o+r,_=n-o,y=t._x*a+s._x*h+e._x*c+i._x*_,l=t._y*a+s._y*h+e._y*c+i._y*_,m=t._z*a+s._z*h+e._z*c+i._z*_,x=t._w*a+s._w*h+e._w*c+i._w*_;return new u(y,l,m,x)}static Hermite1stDerivative(t,e,s,i,r){const o=u.Zero();return this.Hermite1stDerivativeToRef(t,e,s,i,r,o),o}static Hermite1stDerivativeToRef(t,e,s,i,r,o){const n=r*r;o.x=6*(n-r)*t.x+(3*n-4*r+1)*e.x+6*(-n+r)*s.x+(3*n-2*r)*i.x,o.y=6*(n-r)*t.y+(3*n-4*r+1)*e.y+6*(-n+r)*s.y+(3*n-2*r)*i.y,o.z=6*(n-r)*t.z+(3*n-4*r+1)*e.z+6*(-n+r)*s.z+(3*n-2*r)*i.z,o.w=6*(n-r)*t.w+(3*n-4*r+1)*e.w+6*(-n+r)*s.w+(3*n-2*r)*i.w}}class m{constructor(){this._isIdentity=!1,this._isIdentityDirty=!0,this._isIdentity3x2=!0,this._isIdentity3x2Dirty=!0,this.updateFlag=-1,a.Z.MatrixTrackPrecisionChange&&a.Z.MatrixTrackedMatrices.push(this),this._m=new a.Z.MatrixCurrentType(16),this.markAsUpdated()}static get Use64Bits(){return a.Z.MatrixUse64Bits}get m(){return this._m}markAsUpdated(){this.updateFlag=m._UpdateFlagSeed++,this._isIdentity=!1,this._isIdentity3x2=!1,this._isIdentityDirty=!0,this._isIdentity3x2Dirty=!0}_updateIdentityStatus(t,e=!1,s=!1,i=!0){this._isIdentity=t,this._isIdentity3x2=t||s,this._isIdentityDirty=!this._isIdentity&&e,this._isIdentity3x2Dirty=!this._isIdentity3x2&&i}isIdentity(){if(this._isIdentityDirty){this._isIdentityDirty=!1;const t=this._m;this._isIdentity=1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]}return this._isIdentity}isIdentityAs3x2(){return this._isIdentity3x2Dirty&&(this._isIdentity3x2Dirty=!1,1!==this._m[0]||1!==this._m[5]||1!==this._m[15]||0!==this._m[1]||0!==this._m[2]||0!==this._m[3]||0!==this._m[4]||0!==this._m[6]||0!==this._m[7]||0!==this._m[8]||0!==this._m[9]||0!==this._m[10]||0!==this._m[11]||0!==this._m[12]||0!==this._m[13]||0!==this._m[14]?this._isIdentity3x2=!1:this._isIdentity3x2=!0),this._isIdentity3x2}determinant(){if(!0===this._isIdentity)return 1;const t=this._m,e=t[0],s=t[1],i=t[2],r=t[3],o=t[4],n=t[5],a=t[6],h=t[7],c=t[8],_=t[9],y=t[10],l=t[11],u=t[12],m=t[13],x=t[14],R=t[15],f=y*R-x*l,z=_*R-m*l,d=_*x-m*y,T=c*R-u*l,w=c*x-y*u,p=c*m-u*_;return e*+(n*f-a*z+h*d)+s*-(o*f-a*T+h*w)+i*+(o*z-n*T+h*p)+r*-(o*d-n*w+a*p)}toArray(){return this._m}asArray(){return this._m}invert(){return this.invertToRef(this),this}reset(){return m.FromValuesToRef(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,this),this._updateIdentityStatus(!1),this}add(t){const e=new m;return this.addToRef(t,e),e}addToRef(t,e){const s=this._m,i=e._m,r=t.m;for(let o=0;o<16;o++)i[o]=s[o]+r[o];return e.markAsUpdated(),this}addToSelf(t){const e=this._m,s=t.m;for(let i=0;i<16;i++)e[i]+=s[i];return this.markAsUpdated(),this}invertToRef(t){if(!0===this._isIdentity)return m.IdentityToRef(t),this;const e=this._m,s=e[0],i=e[1],r=e[2],o=e[3],n=e[4],a=e[5],h=e[6],c=e[7],_=e[8],y=e[9],l=e[10],u=e[11],x=e[12],R=e[13],f=e[14],z=e[15],d=l*z-f*u,T=y*z-R*u,w=y*f-R*l,p=_*z-x*u,F=_*f-l*x,I=_*R-x*y,M=+(a*d-h*T+c*w),g=-(n*d-h*p+c*F),A=+(n*T-a*p+c*I),P=-(n*w-a*F+h*I),V=s*M+i*g+r*A+o*P;if(0===V)return t.copyFrom(this),this;const D=1/V,C=h*z-f*c,L=a*z-R*c,H=a*f-R*h,k=n*z-x*c,v=n*f-x*h,O=n*R-x*a,Z=h*u-l*c,S=a*u-y*c,U=a*l-y*h,b=n*u-_*c,q=n*l-_*h,B=n*y-_*a,N=-(i*d-r*T+o*w),E=+(s*d-r*p+o*F),Q=-(s*T-i*p+o*I),W=+(s*w-i*F+r*I),Y=+(i*C-r*L+o*H),j=-(s*C-r*k+o*v),$=+(s*L-i*k+o*O),G=-(s*H-i*v+r*O),X=-(i*Z-r*S+o*U),J=+(s*Z-r*b+o*q),K=-(s*S-i*b+o*B),tt=+(s*U-i*q+r*B);return m.FromValuesToRef(M*D,N*D,Y*D,X*D,g*D,E*D,j*D,J*D,A*D,Q*D,$*D,K*D,P*D,W*D,G*D,tt*D,t),this}addAtIndex(t,e){return this._m[t]+=e,this.markAsUpdated(),this}multiplyAtIndex(t,e){return this._m[t]*=e,this.markAsUpdated(),this}setTranslationFromFloats(t,e,s){return this._m[12]=t,this._m[13]=e,this._m[14]=s,this.markAsUpdated(),this}addTranslationFromFloats(t,e,s){return this._m[12]+=t,this._m[13]+=e,this._m[14]+=s,this.markAsUpdated(),this}setTranslation(t){return this.setTranslationFromFloats(t._x,t._y,t._z)}getTranslation(){return new y(this._m[12],this._m[13],this._m[14])}getTranslationToRef(t){return t.x=this._m[12],t.y=this._m[13],t.z=this._m[14],this}removeRotationAndScaling(){const t=this.m;return m.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,t[12],t[13],t[14],t[15],this),this._updateIdentityStatus(0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]),this}multiply(t){const e=new m;return this.multiplyToRef(t,e),e}copyFrom(t){t.copyToArray(this._m);const e=t;return this.updateFlag=e.updateFlag,this._updateIdentityStatus(e._isIdentity,e._isIdentityDirty,e._isIdentity3x2,e._isIdentity3x2Dirty),this}copyToArray(t,e=0){const s=this._m;return t[e]=s[0],t[e+1]=s[1],t[e+2]=s[2],t[e+3]=s[3],t[e+4]=s[4],t[e+5]=s[5],t[e+6]=s[6],t[e+7]=s[7],t[e+8]=s[8],t[e+9]=s[9],t[e+10]=s[10],t[e+11]=s[11],t[e+12]=s[12],t[e+13]=s[13],t[e+14]=s[14],t[e+15]=s[15],this}multiplyToRef(t,e){return this._isIdentity?(e.copyFrom(t),this):t._isIdentity?(e.copyFrom(this),this):(this.multiplyToArray(t,e._m,0),e.markAsUpdated(),this)}multiplyToArray(t,e,s){const i=this._m,r=t.m,o=i[0],n=i[1],a=i[2],h=i[3],c=i[4],_=i[5],y=i[6],l=i[7],u=i[8],m=i[9],x=i[10],R=i[11],f=i[12],z=i[13],d=i[14],T=i[15],w=r[0],p=r[1],F=r[2],I=r[3],M=r[4],g=r[5],A=r[6],P=r[7],V=r[8],D=r[9],C=r[10],L=r[11],H=r[12],k=r[13],v=r[14],O=r[15];return e[s]=o*w+n*M+a*V+h*H,e[s+1]=o*p+n*g+a*D+h*k,e[s+2]=o*F+n*A+a*C+h*v,e[s+3]=o*I+n*P+a*L+h*O,e[s+4]=c*w+_*M+y*V+l*H,e[s+5]=c*p+_*g+y*D+l*k,e[s+6]=c*F+_*A+y*C+l*v,e[s+7]=c*I+_*P+y*L+l*O,e[s+8]=u*w+m*M+x*V+R*H,e[s+9]=u*p+m*g+x*D+R*k,e[s+10]=u*F+m*A+x*C+R*v,e[s+11]=u*I+m*P+x*L+R*O,e[s+12]=f*w+z*M+d*V+T*H,e[s+13]=f*p+z*g+d*D+T*k,e[s+14]=f*F+z*A+d*C+T*v,e[s+15]=f*I+z*P+d*L+T*O,this}equals(t){const e=t;if(!e)return!1;if((this._isIdentity||e._isIdentity)&&!this._isIdentityDirty&&!e._isIdentityDirty)return this._isIdentity&&e._isIdentity;const s=this.m,i=e.m;return s[0]===i[0]&&s[1]===i[1]&&s[2]===i[2]&&s[3]===i[3]&&s[4]===i[4]&&s[5]===i[5]&&s[6]===i[6]&&s[7]===i[7]&&s[8]===i[8]&&s[9]===i[9]&&s[10]===i[10]&&s[11]===i[11]&&s[12]===i[12]&&s[13]===i[13]&&s[14]===i[14]&&s[15]===i[15]}clone(){const t=new m;return t.copyFrom(this),t}getClassName(){return"Matrix"}getHashCode(){let t=c(this._m[0]);for(let e=1;e<16;e++)t=397*t^c(this._m[e]);return t}decomposeToTransformNode(t){return t.rotationQuaternion=t.rotationQuaternion||new u,this.decompose(t.scaling,t.rotationQuaternion,t.position)}decompose(t,e,s,i){if(this._isIdentity)return s&&s.setAll(0),t&&t.setAll(1),e&&e.copyFromFloats(0,0,0,1),!0;const r=this._m;if(s&&s.copyFromFloats(r[12],r[13],r[14]),(t=t||x.Vector3[0]).x=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]),t.y=Math.sqrt(r[4]*r[4]+r[5]*r[5]+r[6]*r[6]),t.z=Math.sqrt(r[8]*r[8]+r[9]*r[9]+r[10]*r[10]),i){const e=i.scaling.x<0?-1:1,s=i.scaling.y<0?-1:1,r=i.scaling.z<0?-1:1;t.x*=e,t.y*=s,t.z*=r}else this.determinant()<=0&&(t.y*=-1);if(0===t._x||0===t._y||0===t._z)return e&&e.copyFromFloats(0,0,0,1),!1;if(e){const s=1/t._x,i=1/t._y,o=1/t._z;m.FromValuesToRef(r[0]*s,r[1]*s,r[2]*s,0,r[4]*i,r[5]*i,r[6]*i,0,r[8]*o,r[9]*o,r[10]*o,0,0,0,0,1,x.Matrix[0]),u.FromRotationMatrixToRef(x.Matrix[0],e)}return!0}getRow(t){if(t<0||t>3)return null;const e=4*t;return new l(this._m[e+0],this._m[e+1],this._m[e+2],this._m[e+3])}getRowToRef(t,e){if(t>=0&&t<3){const s=4*t;e.x=this._m[s+0],e.y=this._m[s+1],e.z=this._m[s+2],e.w=this._m[s+3]}return this}setRow(t,e){return this.setRowFromFloats(t,e.x,e.y,e.z,e.w)}transpose(){return m.Transpose(this)}transposeToRef(t){return m.TransposeToRef(this,t),this}setRowFromFloats(t,e,s,i,r){if(t<0||t>3)return this;const o=4*t;return this._m[o+0]=e,this._m[o+1]=s,this._m[o+2]=i,this._m[o+3]=r,this.markAsUpdated(),this}scale(t){const e=new m;return this.scaleToRef(t,e),e}scaleToRef(t,e){for(let s=0;s<16;s++)e._m[s]=this._m[s]*t;return e.markAsUpdated(),this}scaleAndAddToRef(t,e){for(let s=0;s<16;s++)e._m[s]+=this._m[s]*t;return e.markAsUpdated(),this}toNormalMatrix(t){const e=x.Matrix[0];this.invertToRef(e),e.transposeToRef(t);const s=t._m;m.FromValuesToRef(s[0],s[1],s[2],0,s[4],s[5],s[6],0,s[8],s[9],s[10],0,0,0,0,1,t)}getRotationMatrix(){const t=new m;return this.getRotationMatrixToRef(t),t}getRotationMatrixToRef(t){const e=x.Vector3[0];if(!this.decompose(e))return m.IdentityToRef(t),this;const s=this._m,i=1/e._x,r=1/e._y,o=1/e._z;return m.FromValuesToRef(s[0]*i,s[1]*i,s[2]*i,0,s[4]*r,s[5]*r,s[6]*r,0,s[8]*o,s[9]*o,s[10]*o,0,0,0,0,1,t),this}toggleModelMatrixHandInPlace(){const t=this._m;t[2]*=-1,t[6]*=-1,t[8]*=-1,t[9]*=-1,t[14]*=-1,this.markAsUpdated()}toggleProjectionMatrixHandInPlace(){const t=this._m;t[8]*=-1,t[9]*=-1,t[10]*=-1,t[11]*=-1,this.markAsUpdated()}static FromArray(t,e=0){const s=new m;return m.FromArrayToRef(t,e,s),s}static FromArrayToRef(t,e,s){for(let i=0;i<16;i++)s._m[i]=t[i+e];s.markAsUpdated()}static FromFloat32ArrayToRefScaled(t,e,s,i){for(let r=0;r<16;r++)i._m[r]=t[r+e]*s;i.markAsUpdated()}static get IdentityReadOnly(){return m._IdentityReadOnly}static FromValuesToRef(t,e,s,i,r,o,n,a,h,c,_,y,l,u,m,x,R){const f=R._m;f[0]=t,f[1]=e,f[2]=s,f[3]=i,f[4]=r,f[5]=o,f[6]=n,f[7]=a,f[8]=h,f[9]=c,f[10]=_,f[11]=y,f[12]=l,f[13]=u,f[14]=m,f[15]=x,R.markAsUpdated()}static FromValues(t,e,s,i,r,o,n,a,h,c,_,y,l,u,x,R){const f=new m,z=f._m;return z[0]=t,z[1]=e,z[2]=s,z[3]=i,z[4]=r,z[5]=o,z[6]=n,z[7]=a,z[8]=h,z[9]=c,z[10]=_,z[11]=y,z[12]=l,z[13]=u,z[14]=x,z[15]=R,f.markAsUpdated(),f}static Compose(t,e,s){const i=new m;return m.ComposeToRef(t,e,s,i),i}static ComposeToRef(t,e,s,i){const r=i._m,o=e._x,n=e._y,a=e._z,h=e._w,c=o+o,_=n+n,y=a+a,l=o*c,u=o*_,m=o*y,x=n*_,R=n*y,f=a*y,z=h*c,d=h*_,T=h*y,w=t._x,p=t._y,F=t._z;r[0]=(1-(x+f))*w,r[1]=(u+T)*w,r[2]=(m-d)*w,r[3]=0,r[4]=(u-T)*p,r[5]=(1-(l+f))*p,r[6]=(R+z)*p,r[7]=0,r[8]=(m+d)*F,r[9]=(R-z)*F,r[10]=(1-(l+x))*F,r[11]=0,r[12]=s._x,r[13]=s._y,r[14]=s._z,r[15]=1,i.markAsUpdated()}static Identity(){const t=m.FromValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return t._updateIdentityStatus(!0),t}static IdentityToRef(t){m.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,t),t._updateIdentityStatus(!0)}static Zero(){const t=m.FromValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return t._updateIdentityStatus(!1),t}static RotationX(t){const e=new m;return m.RotationXToRef(t,e),e}static Invert(t){const e=new m;return t.invertToRef(e),e}static RotationXToRef(t,e){const s=Math.sin(t),i=Math.cos(t);m.FromValuesToRef(1,0,0,0,0,i,s,0,0,-s,i,0,0,0,0,1,e),e._updateIdentityStatus(1===i&&0===s)}static RotationY(t){const e=new m;return m.RotationYToRef(t,e),e}static RotationYToRef(t,e){const s=Math.sin(t),i=Math.cos(t);m.FromValuesToRef(i,0,-s,0,0,1,0,0,s,0,i,0,0,0,0,1,e),e._updateIdentityStatus(1===i&&0===s)}static RotationZ(t){const e=new m;return m.RotationZToRef(t,e),e}static RotationZToRef(t,e){const s=Math.sin(t),i=Math.cos(t);m.FromValuesToRef(i,s,0,0,-s,i,0,0,0,0,1,0,0,0,0,1,e),e._updateIdentityStatus(1===i&&0===s)}static RotationAxis(t,e){const s=new m;return m.RotationAxisToRef(t,e,s),s}static RotationAxisToRef(t,e,s){const i=Math.sin(-e),r=Math.cos(-e),o=1-r;t.normalize();const n=s._m;n[0]=t._x*t._x*o+r,n[1]=t._x*t._y*o-t._z*i,n[2]=t._x*t._z*o+t._y*i,n[3]=0,n[4]=t._y*t._x*o+t._z*i,n[5]=t._y*t._y*o+r,n[6]=t._y*t._z*o-t._x*i,n[7]=0,n[8]=t._z*t._x*o-t._y*i,n[9]=t._z*t._y*o+t._x*i,n[10]=t._z*t._z*o+r,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,s.markAsUpdated()}static RotationAlignToRef(t,e,s){const i=y.Dot(e,t),o=s._m;if(i<-1+r.kn)o[0]=-1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0;else{const s=y.Cross(e,t),r=1/(1+i);o[0]=s._x*s._x*r+i,o[1]=s._y*s._x*r-s._z,o[2]=s._z*s._x*r+s._y,o[3]=0,o[4]=s._x*s._y*r+s._z,o[5]=s._y*s._y*r+i,o[6]=s._z*s._y*r-s._x,o[7]=0,o[8]=s._x*s._z*r-s._y,o[9]=s._y*s._z*r+s._x,o[10]=s._z*s._z*r+i,o[11]=0}o[12]=0,o[13]=0,o[14]=0,o[15]=1,s.markAsUpdated()}static RotationYawPitchRoll(t,e,s){const i=new m;return m.RotationYawPitchRollToRef(t,e,s,i),i}static RotationYawPitchRollToRef(t,e,s,i){u.RotationYawPitchRollToRef(t,e,s,x.Quaternion[0]),x.Quaternion[0].toRotationMatrix(i)}static Scaling(t,e,s){const i=new m;return m.ScalingToRef(t,e,s,i),i}static ScalingToRef(t,e,s,i){m.FromValuesToRef(t,0,0,0,0,e,0,0,0,0,s,0,0,0,0,1,i),i._updateIdentityStatus(1===t&&1===e&&1===s)}static Translation(t,e,s){const i=new m;return m.TranslationToRef(t,e,s,i),i}static TranslationToRef(t,e,s,i){m.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,t,e,s,1,i),i._updateIdentityStatus(0===t&&0===e&&0===s)}static Lerp(t,e,s){const i=new m;return m.LerpToRef(t,e,s,i),i}static LerpToRef(t,e,s,i){const r=i._m,o=t.m,n=e.m;for(let a=0;a<16;a++)r[a]=o[a]*(1-s)+n[a]*s;i.markAsUpdated()}static DecomposeLerp(t,e,s){const i=new m;return m.DecomposeLerpToRef(t,e,s,i),i}static DecomposeLerpToRef(t,e,s,i){const r=x.Vector3[0],o=x.Quaternion[0],n=x.Vector3[1];t.decompose(r,o,n);const a=x.Vector3[2],h=x.Quaternion[1],c=x.Vector3[3];e.decompose(a,h,c);const _=x.Vector3[4];y.LerpToRef(r,a,s,_);const l=x.Quaternion[2];u.SlerpToRef(o,h,s,l);const R=x.Vector3[5];y.LerpToRef(n,c,s,R),m.ComposeToRef(_,l,R,i)}static LookAtLH(t,e,s){const i=new m;return m.LookAtLHToRef(t,e,s,i),i}static LookAtLHToRef(t,e,s,i){const r=x.Vector3[0],o=x.Vector3[1],n=x.Vector3[2];e.subtractToRef(t,n),n.normalize(),y.CrossToRef(s,n,r);const a=r.lengthSquared();0===a?r.x=1:r.normalizeFromLength(Math.sqrt(a)),y.CrossToRef(n,r,o),o.normalize();const h=-y.Dot(r,t),c=-y.Dot(o,t),_=-y.Dot(n,t);m.FromValuesToRef(r._x,o._x,n._x,0,r._y,o._y,n._y,0,r._z,o._z,n._z,0,h,c,_,1,i)}static LookAtRH(t,e,s){const i=new m;return m.LookAtRHToRef(t,e,s,i),i}static LookAtRHToRef(t,e,s,i){const r=x.Vector3[0],o=x.Vector3[1],n=x.Vector3[2];t.subtractToRef(e,n),n.normalize(),y.CrossToRef(s,n,r);const a=r.lengthSquared();0===a?r.x=1:r.normalizeFromLength(Math.sqrt(a)),y.CrossToRef(n,r,o),o.normalize();const h=-y.Dot(r,t),c=-y.Dot(o,t),_=-y.Dot(n,t);m.FromValuesToRef(r._x,o._x,n._x,0,r._y,o._y,n._y,0,r._z,o._z,n._z,0,h,c,_,1,i)}static LookDirectionLH(t,e){const s=new m;return m.LookDirectionLHToRef(t,e,s),s}static LookDirectionLHToRef(t,e,s){const i=x.Vector3[0];i.copyFrom(t),i.scaleInPlace(-1);const r=x.Vector3[1];y.CrossToRef(e,i,r),m.FromValuesToRef(r._x,r._y,r._z,0,e._x,e._y,e._z,0,i._x,i._y,i._z,0,0,0,0,1,s)}static LookDirectionRH(t,e){const s=new m;return m.LookDirectionRHToRef(t,e,s),s}static LookDirectionRHToRef(t,e,s){const i=x.Vector3[2];y.CrossToRef(e,t,i),m.FromValuesToRef(i._x,i._y,i._z,0,e._x,e._y,e._z,0,t._x,t._y,t._z,0,0,0,0,1,s)}static OrthoLH(t,e,s,i,r){const o=new m;return m.OrthoLHToRef(t,e,s,i,o,r),o}static OrthoLHToRef(t,e,s,i,r,o){const n=2/t,a=2/e,h=2/(i-s),c=-(i+s)/(i-s);m.FromValuesToRef(n,0,0,0,0,a,0,0,0,0,h,0,0,0,c,1,r),o&&r.multiplyToRef(f,r),r._updateIdentityStatus(1===n&&1===a&&1===h&&0===c)}static OrthoOffCenterLH(t,e,s,i,r,o,n){const a=new m;return m.OrthoOffCenterLHToRef(t,e,s,i,r,o,a,n),a}static OrthoOffCenterLHToRef(t,e,s,i,r,o,n,a){const h=2/(e-t),c=2/(i-s),_=2/(o-r),y=-(o+r)/(o-r),l=(t+e)/(t-e),u=(i+s)/(s-i);m.FromValuesToRef(h,0,0,0,0,c,0,0,0,0,_,0,l,u,y,1,n),a&&n.multiplyToRef(f,n),n.markAsUpdated()}static OrthoOffCenterRH(t,e,s,i,r,o,n){const a=new m;return m.OrthoOffCenterRHToRef(t,e,s,i,r,o,a,n),a}static OrthoOffCenterRHToRef(t,e,s,i,r,o,n,a){m.OrthoOffCenterLHToRef(t,e,s,i,r,o,n,a),n._m[10]*=-1}static PerspectiveLH(t,e,s,i,r,o=0){const n=new m,a=2*s/t,h=2*s/e,c=(i+s)/(i-s),_=-2*i*s/(i-s),y=Math.tan(o);return m.FromValuesToRef(a,0,0,0,0,h,0,y,0,0,c,1,0,0,_,0,n),r&&n.multiplyToRef(f,n),n._updateIdentityStatus(!1),n}static PerspectiveFovLH(t,e,s,i,r,o=0,n=!1){const a=new m;return m.PerspectiveFovLHToRef(t,e,s,i,a,!0,r,o,n),a}static PerspectiveFovLHToRef(t,e,s,i,r,o=!0,n,a=0,h=!1){const c=s,_=i,y=1/Math.tan(.5*t),l=o?y/e:y,u=o?y:y*e,x=h&&0===c?-1:0!==_?(_+c)/(_-c):1,R=h&&0===c?2*_:0!==_?-2*_*c/(_-c):-2*c,z=Math.tan(a);m.FromValuesToRef(l,0,0,0,0,u,0,z,0,0,x,1,0,0,R,0,r),n&&r.multiplyToRef(f,r),r._updateIdentityStatus(!1)}static PerspectiveFovReverseLHToRef(t,e,s,i,r,o=!0,n,a=0){const h=1/Math.tan(.5*t),c=o?h/e:h,_=o?h:h*e,y=Math.tan(a);m.FromValuesToRef(c,0,0,0,0,_,0,y,0,0,-s,1,0,0,1,0,r),n&&r.multiplyToRef(f,r),r._updateIdentityStatus(!1)}static PerspectiveFovRH(t,e,s,i,r,o=0,n=!1){const a=new m;return m.PerspectiveFovRHToRef(t,e,s,i,a,!0,r,o,n),a}static PerspectiveFovRHToRef(t,e,s,i,r,o=!0,n,a=0,h=!1){const c=s,_=i,y=1/Math.tan(.5*t),l=o?y/e:y,u=o?y:y*e,x=h&&0===c?1:0!==_?-(_+c)/(_-c):-1,R=h&&0===c?2*_:0!==_?-2*_*c/(_-c):-2*c,z=Math.tan(a);m.FromValuesToRef(l,0,0,0,0,u,0,z,0,0,x,-1,0,0,R,0,r),n&&r.multiplyToRef(f,r),r._updateIdentityStatus(!1)}static PerspectiveFovReverseRHToRef(t,e,s,i,r,o=!0,n,a=0){const h=1/Math.tan(.5*t),c=o?h/e:h,_=o?h:h*e,y=Math.tan(a);m.FromValuesToRef(c,0,0,0,0,_,0,y,0,0,-s,-1,0,0,-1,0,r),n&&r.multiplyToRef(f,r),r._updateIdentityStatus(!1)}static PerspectiveFovWebVRToRef(t,e,s,i,r=!1,o,n=0){const a=r?-1:1,h=Math.tan(t.upDegrees*Math.PI/180),c=Math.tan(t.downDegrees*Math.PI/180),_=Math.tan(t.leftDegrees*Math.PI/180),y=Math.tan(t.rightDegrees*Math.PI/180),l=2/(_+y),u=2/(h+c),m=Math.tan(n),x=i._m;x[0]=l,x[1]=x[2]=x[3]=x[4]=0,x[5]=u,x[6]=0,x[7]=m,x[8]=(_-y)*l*.5,x[9]=-(h-c)*u*.5,x[10]=-s/(e-s),x[11]=1*a,x[12]=x[13]=x[15]=0,x[14]=-2*s*e/(s-e),o&&i.multiplyToRef(f,i),i.markAsUpdated()}static GetFinalMatrix(t,e,s,i,r,o){const n=t.width,a=t.height,h=t.x,c=t.y,_=m.FromValues(n/2,0,0,0,0,-a/2,0,0,0,0,o-r,0,h+n/2,a/2+c,r,1),y=x.Matrix[0];return e.multiplyToRef(s,y),y.multiplyToRef(i,y),y.multiply(_)}static GetAsMatrix2x2(t){const e=t.m,s=[e[0],e[1],e[4],e[5]];return a.Z.MatrixUse64Bits?s:new Float32Array(s)}static GetAsMatrix3x3(t){const e=t.m,s=[e[0],e[1],e[2],e[4],e[5],e[6],e[8],e[9],e[10]];return a.Z.MatrixUse64Bits?s:new Float32Array(s)}static Transpose(t){const e=new m;return m.TransposeToRef(t,e),e}static TransposeToRef(t,e){const s=e._m,i=t.m;s[0]=i[0],s[1]=i[4],s[2]=i[8],s[3]=i[12],s[4]=i[1],s[5]=i[5],s[6]=i[9],s[7]=i[13],s[8]=i[2],s[9]=i[6],s[10]=i[10],s[11]=i[14],s[12]=i[3],s[13]=i[7],s[14]=i[11],s[15]=i[15],e.markAsUpdated(),e._updateIdentityStatus(t._isIdentity,t._isIdentityDirty)}static Reflection(t){const e=new m;return m.ReflectionToRef(t,e),e}static ReflectionToRef(t,e){t.normalize();const s=t.normal.x,i=t.normal.y,r=t.normal.z,o=-2*s,n=-2*i,a=-2*r;m.FromValuesToRef(o*s+1,n*s,a*s,0,o*i,n*i+1,a*i,0,o*r,n*r,a*r+1,0,o*t.d,n*t.d,a*t.d,1,e)}static FromXYZAxesToRef(t,e,s,i){m.FromValuesToRef(t._x,t._y,t._z,0,e._x,e._y,e._z,0,s._x,s._y,s._z,0,0,0,0,1,i)}static FromQuaternionToRef(t,e){const s=t._x*t._x,i=t._y*t._y,r=t._z*t._z,o=t._x*t._y,n=t._z*t._w,a=t._z*t._x,h=t._y*t._w,c=t._y*t._z,_=t._x*t._w;e._m[0]=1-2*(i+r),e._m[1]=2*(o+n),e._m[2]=2*(a-h),e._m[3]=0,e._m[4]=2*(o-n),e._m[5]=1-2*(r+s),e._m[6]=2*(c+_),e._m[7]=0,e._m[8]=2*(a+h),e._m[9]=2*(c-_),e._m[10]=1-2*(i+s),e._m[11]=0,e._m[12]=0,e._m[13]=0,e._m[14]=0,e._m[15]=1,e.markAsUpdated()}}m._UpdateFlagSeed=0,m._IdentityReadOnly=m.Identity();class x{}x.Vector3=o.B.BuildTuple(11,y.Zero),x.Matrix=o.B.BuildTuple(2,m.Identity),x.Quaternion=o.B.BuildTuple(3,u.Zero);class R{}R.Vector2=o.B.BuildTuple(3,_.Zero),R.Vector3=o.B.BuildTuple(13,y.Zero),R.Vector4=o.B.BuildTuple(3,l.Zero),R.Quaternion=o.B.BuildTuple(2,u.Zero),R.Matrix=o.B.BuildTuple(8,m.Identity),(0,n.H)("BABYLON.Vector2",_),(0,n.H)("BABYLON.Vector3",y),(0,n.H)("BABYLON.Vector4",l),(0,n.H)("BABYLON.Matrix",m);const f=m.FromValues(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1)}}]);